<template>
  <Chat ref="chatRef">
    <template #navbar>
      <van-nav-bar title="Image å›¾ç‰‡" left-arrow fixed @click-left="goBack" />
    </template>

    <template #default>
      <!-- ä»£ç æ¼”ç¤º -->
      <div class="demo-section">
        <div class="section-title">ä»£ç æ¼”ç¤º</div>
      </div>

      <!-- åŸºç¡€ç”¨æ³• -->
      <div class="demo-section">
        <div class="section-title">åŸºç¡€ç”¨æ³•</div>
        <Flex gap="16px" wrap="wrap">
          <Image :src="photo1" width="100" height="100" />
          <Image :src="photo2" width="100" height="100" />
        </Flex>
      </div>

      <!-- å›¾ç‰‡é€‚é… -->
      <div class="demo-section">
        <div class="section-title">å›¾ç‰‡é€‚é… - fill</div>
        <Image :src="photo1" width="100%" height="200" fit="fill" />
      </div>

      <div class="demo-section">
        <div class="section-title">å›¾ç‰‡é€‚é… - contain</div>
        <Image :src="photo1" width="100%" height="200" fit="contain" />
      </div>

      <div class="demo-section">
        <div class="section-title">å›¾ç‰‡é€‚é… - cover</div>
        <Image :src="photo1" width="100%" height="200" fit="cover" />
      </div>

      <div class="demo-section">
        <div class="section-title">å›¾ç‰‡é€‚é… - none</div>
        <Image :src="photo1" width="100%" height="200" fit="none" />
      </div>

      <div class="demo-section">
        <div class="section-title">å›¾ç‰‡é€‚é… - scale-down</div>
        <Image :src="photo1" width="100%" height="200" fit="scale-down" />
      </div>

      <!-- åœ†å½¢å›¾ç‰‡ -->
      <div class="demo-section">
        <div class="section-title">åœ†å½¢å›¾ç‰‡</div>
        <Flex gap="16px">
          <Image :src="photo1" width="100" height="100" round />
          <Image :src="photo2" width="100" height="100" round />
        </Flex>
      </div>

      <!-- åœ†è§’å¤§å° -->
      <div class="demo-section">
        <div class="section-title">åœ†è§’å¤§å°</div>
        <Flex gap="16px" wrap="wrap">
          <div class="radius-item">
            <Image :src="photo1" width="100" height="100" :radius="0" />
            <div class="radius-label">é»˜è®¤</div>
          </div>
          <div class="radius-item">
            <Image :src="photo1" width="100" height="100" :radius="4" />
            <div class="radius-label">4px</div>
          </div>
          <div class="radius-item">
            <Image :src="photo1" width="100" height="100" :radius="8" />
            <div class="radius-label">8px</div>
          </div>
          <div class="radius-item">
            <Image :src="photo1" width="100" height="100" :radius="16" />
            <div class="radius-label">16px</div>
          </div>
        </Flex>
      </div>

      <!-- æ‡’åŠ è½½ -->
      <div class="demo-section">
        <div class="section-title">æ‡’åŠ è½½</div>
        <Flex direction="column" gap="16px">
          <Image
            v-for="n in 5"
            :key="n"
            :src="`${photo1}?v=${n}`"
            width="100%"
            height="200"
            lazy
            fit="cover"
          />
        </Flex>
      </div>

      <!-- åŠ è½½å¤±è´¥ -->
      <div class="demo-section">
        <div class="section-title">åŠ è½½å¤±è´¥</div>
        <Flex gap="16px">
          <Image
            src="https://invalid-url.com/image.jpg"
            width="100"
            height="100"
          />
          <Image
            src="https://invalid-url.com/image2.jpg"
            width="100"
            height="100"
            round
          />
        </Flex>
      </div>

      <!-- è‡ªå®šä¹‰å ä½ -->
      <div class="demo-section">
        <div class="section-title">è‡ªå®šä¹‰å ä½</div>
        <Flex gap="16px">
          <Image
            src="https://invalid-url.com/image.jpg"
            width="100"
            height="100"
          >
            <template #error>
              <Flex
                direction="column"
                align="center"
                justify="center"
                style="height: 100%; background: #f7f8fa"
              >
                <div style="font-size: 24px">ğŸ˜¢</div>
                <div style="font-size: 12px; color: #969799; margin-top: 4px">
                  åŠ è½½å¤±è´¥
                </div>
              </Flex>
            </template>
          </Image>
          <Image :src="slowImage" width="100" height="100">
            <template #loading>
              <Flex
                align="center"
                justify="center"
                style="
                  height: 100%;
                  background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
                "
              >
                <van-loading type="spinner" size="20" color="#ff9a62" />
              </Flex>
            </template>
          </Image>
        </Flex>
      </div>

      <!-- å®é™…åº”ç”¨ -->
      <div class="demo-section">
        <div class="section-title">å®é™…åº”ç”¨ - ç”¨æˆ·å¤´åƒ</div>
        <Flex gap="12px" align="center">
          <Image :src="photo1" width="48" height="48" round />
          <div>
            <div style="font-size: 16px; font-weight: 600; color: #323233">
              ç”¨æˆ·å
            </div>
            <div style="font-size: 12px; color: #969799; margin-top: 4px">
              è¿™æ˜¯ä¸€æ®µä¸ªæ€§ç­¾å...
            </div>
          </div>
        </Flex>
      </div>

      <div class="demo-section">
        <div class="section-title">å®é™…åº”ç”¨ - å›¾ç‰‡åˆ—è¡¨</div>
        <Flex gap="8px" wrap="wrap">
          <Image
            v-for="n in 6"
            :key="n"
            :src="n % 2 === 0 ? photo1 : photo2"
            width="calc(33.33% - 6px)"
            height="100"
            fit="cover"
            :radius="8"
          />
        </Flex>
      </div>

      <div class="demo-section">
        <div class="section-title">å®é™…åº”ç”¨ - å¡ç‰‡å°é¢</div>
        <div class="demo-card">
          <Image :src="photo2" width="100%" height="160" fit="cover" />
          <div class="demo-card-content">
            <div class="demo-card-title">å¡ç‰‡æ ‡é¢˜</div>
            <div class="demo-card-desc">
              è¿™æ˜¯å¡ç‰‡çš„æè¿°ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ä»»ä½•å†…å®¹...
            </div>
            <Flex gap="8px" style="margin-top: 12px">
              <Button text="æŸ¥çœ‹" type="primary" size="sm" block />
              <Button text="åˆ†äº«" type="default" size="sm" block />
            </Flex>
          </div>
        </div>
      </div>
    </template>
  </Chat>
</template>

<script setup>
import { ref } from "vue";
import { useRouter } from "vue-router";
import { Chat, Image, Flex, Button } from "../../../packages/src/index.js";

const router = useRouter();
const chatRef = ref(null);

// ç¤ºä¾‹å›¾ç‰‡
const photo1 = "https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg";
const photo2 = "https://fastly.jsdelivr.net/npm/@vant/assets/logo.png";
const slowImage = "https://via.placeholder.com/100/ffd89b/ffffff?text=Loading";

const goBack = () => {
  router.back();
};
</script>

<style scoped lang="scss">
.demo-section {
  padding: 16px;
  background: #f7f8fa;
  margin-bottom: 8px;
}

.section-title {
  font-size: 14px;
  color: #969799;
  margin-bottom: 12px;
}

.radius-item {
  text-align: center;
}

.radius-label {
  font-size: 12px;
  color: #646566;
  margin-top: 8px;
}

.demo-card {
  background: #ffffff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.demo-card-content {
  padding: 16px;
}

.demo-card-title {
  font-size: 16px;
  font-weight: 600;
  color: #323233;
  margin-bottom: 8px;
}

.demo-card-desc {
  font-size: 14px;
  color: #646566;
  line-height: 1.6;
}
</style>
